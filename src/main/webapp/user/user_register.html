<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Register - Online Courses & Education Bootstrap5 Template</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets//images/favicon.png">

    <!-- CSS
	============================================ -->
    <link rel="stylesheet" href="../assets//css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="../assets//css/vendor/slick.css">
    <link rel="stylesheet" href="../assets//css/vendor/slick-theme.css">
    <link rel="stylesheet" href="../assets//css/plugins/sal.css">
    <link rel="stylesheet" href="../assets//css/plugins/feather.css">
    <link rel="stylesheet" href="../assets//css/plugins/fontawesome.min.css">
    <link rel="stylesheet" href="../assets//css/plugins/euclid-circulara.css">
    <link rel="stylesheet" href="../assets//css/plugins/swiper.css">
    <link rel="stylesheet" href="../assets//css/plugins/magnify.css">
    <link rel="stylesheet" href="../assets//css/plugins/odometer.css">
    <link rel="stylesheet" href="../assets//css/plugins/animation.css">
    <link rel="stylesheet" href="../assets//css/plugins/bootstrap-select.min.css">
    <link rel="stylesheet" href="../assets//css/plugins/jquery-ui.css">
    <link rel="stylesheet" href="../assets//css/plugins/magnigy-popup.min.css">
    <link rel="stylesheet" href="../assets//css/plugins/plyr.css">
    <link rel="stylesheet" href="../assets//css/style.css">
    <link rel="stylesheet" href="../assets//css/style_add.css">
    <link rel="stylesheet" href="../assets//css/joy/register.css">
    <link rel="stylesheet" href="../assets//css/mok/mok_opinion.css">
    <link rel="stylesheet" href="../assets//css/register-verify.css">
</head>

<body class="rbt-header-sticky">

    <!-- Start Header Area  頁首 桌機-->
    <header class="rbt-header rbt-header-10">
        <div class="rbt-sticky-placeholder"></div>
        <div class="rbt-header-wrapper header-space-betwween header-transparent header-sticky">
            <div class="container-fluid">
                <div class="mainbar-row rbt-navigation-start align-items-center">
                    <div class="header-left rbt-header-content">
                        <div class="header-info">
                            <div class="logo">
                                <a href="index.html">
                                    <img src="../assets//images/logo/fitanywherelogo.png" alt="Education Logo Images">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="rbt-main-navigation d-none d-xl-block">
                        <nav class="mainmenu-nav">
                            <ul class="mainmenu">
                                <li class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber">
                                    <a href="#">TDEE / FFMI計算公式</a>
                                </li>

                                <li class="with-megamenu has-menu-child-item mainmenu-sub not-hamber">
                                    <a href="./g2-blog-list.html">討論區</a>
                                </li>

                                <li class="has-dropdown has-menu-child-item mainmenu-sub not-hamber">
                                    <a href="./student-dashboard.html">會員中心</a>
                                </li>

                                <li class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber">
                                    <a href="./g2-02-course-school.html">線上課程<i class="feather-chevron-down"></i></a>
                                </li>

                                <li class="not-hamber"><a href=""><img src="./../assets//images/bell.png" alt=""></a>
                                </li>
                                <li class="not-hamber"><a href="./g2-cart.html"><img src="./../assets//images/cart.png"
                                            alt=""></a></li>
                                <li class="not-hamber">
                                    <a href="" class="button_model feed_back">
                                        <img src="./../assets//images/mail.png" alt="">
                                    </a>
                                    <div id="lightbox" class="none">
                                        <form action="">
                                            <article>
                                                <div class="article-inner-wrapper">
                                                    <h1>意見回饋</h1>
                                                    <div class="feed-back-row1">
                                                        <p>暱稱</p>
                                                        <input type="text" placeholder="哈哈哈" value="" disabled>
                                                    </div>
                                                    <div class="feed-back-row2">
                                                        <p>帳號</p>
                                                        <input type="text" placeholder="jay6666666@gmail.com" value=""
                                                            disabled>
                                                    </div>
                                                    <div class="feed-back-row3">
                                                        <p>意見回饋</p>
                                                        <input type="textarea" class="feedback">
                                                    </div>
                                                    <div class="feed-back-button">
                                                        <button type="button" class="confirm">確認</button>
                                                        <button type="button" class="btn_model_close">取消</button>
                                                    </div>
                                                </div>
                                            </article>
                                        </form>
                                    </div>
                                </li>
                                <li class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber">
                                    <a href="./g2-register.html">登入 / 註冊</a>
                                </li>
                                <li class="hamber">
                                    <div class="hamberger">
                                        <button class="hamberger-button rbt-round-btn">
                                            <i class="feather-menu"></i>
                                        </button>
                                    </div>
                                </li>

                            </ul>
                        </nav>
                    </div>


                </div>
            </div>
        </div>
    </header>
    <!-- End Header Area  -->


    <!-- Start Side Vav -->
    <div class="rbt-cart-side-menu">
        <div class="inner-wrapper">
            <div class="inner-top">
                <div class="content">
                    <div class="title">
                        <h4 class="title mb--0">Your shopping cart</h4>
                    </div>
                    <div class="rbt-btn-close" id="btn_sideNavClose">
                        <button class="minicart-close-button rbt-round-btn"><i class="feather-x"></i></button>
                    </div>
                </div>
            </div>
            <nav class="side-nav w-100">
                <ul class="rbt-minicart-wrapper">
                    <li class="minicart-item">
                        <div class="thumbnail">
                            <a href="#">
                                <img src="../assets//images/product/1.jpg" alt="Product Images">
                            </a>
                        </div>
                        <div class="product-content">
                            <h6 class="title"><a href="single-product.html">Miracle Morning</a></h6>

                            <span class="quantity">1 * <span class="price">$22</span></span>
                        </div>
                        <div class="close-btn">
                            <button class="rbt-round-btn"><i class="feather-x"></i></button>
                        </div>
                    </li>

                    <li class="minicart-item">
                        <div class="thumbnail">
                            <a href="#">
                                <img src="../assets//images/product/7.jpg" alt="Product Images">
                            </a>
                        </div>
                        <div class="product-content">
                            <h6 class="title"><a href="single-product.html">Happy Strong</a></h6>

                            <span class="quantity">1 * <span class="price">$30</span></span>
                        </div>
                        <div class="close-btn">
                            <button class="rbt-round-btn"><i class="feather-x"></i></button>
                        </div>
                    </li>

                    <li class="minicart-item">
                        <div class="thumbnail">
                            <a href="#">
                                <img src="../assets//images/product/3.jpg" alt="Product Images">
                            </a>
                        </div>
                        <div class="product-content">
                            <h6 class="title"><a href="single-product.html">Rich Dad Poor Dad</a></h6>

                            <span class="quantity">1 * <span class="price">$50</span></span>
                        </div>
                        <div class="close-btn">
                            <button class="rbt-round-btn"><i class="feather-x"></i></button>
                        </div>
                    </li>

                    <li class="minicart-item">
                        <div class="thumbnail">
                            <a href="#">
                                <img src="../assets//images/product/4.jpg" alt="Product Images">
                            </a>
                        </div>
                        <div class="product-content">
                            <h6 class="title"><a href="single-product.html">Momentum Theorem</a></h6>

                            <span class="quantity">1 * <span class="price">$50</span></span>
                        </div>
                        <div class="close-btn">
                            <button class="rbt-round-btn"><i class="feather-x"></i></button>
                        </div>
                    </li>
                </ul>
            </nav>

            <div class="rbt-minicart-footer">
                <hr class="mb--0">
                <div class="rbt-cart-subttotal">
                    <p class="subtotal"><strong>Subtotal:</strong></p>
                    <p class="price">$121</p>
                </div>
                <hr class="mb--0">
                <div class="rbt-minicart-bottom mt--20">
                    <div class="view-cart-btn">
                        <a class="rbt-btn btn-border icon-hover w-100 text-center" href="#">
                            <span class="btn-text">View Cart</span>
                            <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                        </a>
                    </div>
                    <div class="checkout-btn mt--20">
                        <a class="rbt-btn btn-gradient icon-hover w-100 text-center" href="#">
                            <span class="btn-text">Checkout</span>
                            <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- End Side Vav -->
    <a class="close_side_menu" href="javascript:void(0);"></a>

    <!-- Start breadcrumb Area -->
    <div class="rbt-breadcrumb-default ptb--100 ptb_md--50 ptb_sm--30 bg-gradient-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb-inner text-center">
                        <h2 class="title">註冊</h2>
                        <ul class="page-list">
                            <li class="rbt-breadcrumb-item"><a href="index.html">首頁</a></li>
                            <li>
                                <div class="icon-right"><i class="feather-chevron-right"></i></div>
                            </li>
                            <li class="rbt-breadcrumb-item active">註冊</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadcrumb Area -->

    <div id="lightbox-verify" class="hidden">
        <form id="verificationForm" action="" method="post">
            <article>
                <div class="article-inner-wrapper">
                    <h1>請輸入驗證碼</h1>
                    <div>

                        <!-- 新增寄送驗證碼按鈕 -->
                        <button type="button" id="sendVerificationCode">寄送驗證碼</button>
                    </div>
                    <div class="article-inner-wrapper-number-input">
                        <input type="text" id="verificationCode1" maxlength="1">
                        <input type="text" id="verificationCode2" maxlength="1">
                        <input type="text" id="verificationCode3" maxlength="1">
                        <input type="text" id="verificationCode4" maxlength="1">
                        <input type="text" id="verificationCode5" maxlength="1">
                        <input type="text" id="verificationCode6" maxlength="1">
                    </div>
                    <div class="article-inner-wrapper-verify-mistake">
                        <p class="hint none">驗證碼錯誤</p>
                        <div class="resend">
                            <p>需要重新寄送驗證碼</p>
                            <!-- 更新寄送鏈接為按鈕動作 -->
                            <button type="button" id="resendVerificationCode">寄送</button>
                        </div>
                    </div>
                    <!-- 新增核對驗證碼按鈕 -->
                    <button type="button" id="checkVerificationCode">核對驗證碼</button>
                </div>
            </article>
        </form>
    </div>



    <div class="rbt-elements-area bg-color-white rbt-section-gap">
        <div class="container">
            <div class="row gy-5 row--30">
                <div class="col-lg-6">
                    <div class="rbt-contact-form contact-form-style-1 max-width-auto">
                        <h3 class="title">註冊</h3>

                        <form class="max-width-auto" method="post" action="/THA105G2/user_controller">
                            <input type="hidden" name="requestType" value="registerForm">
                            <div class="form-group">
                                <input name="u_name" type="text" maxlength="45" required>
                                <label>中英文本名</label>
                            </div>
                            <div class="form-group">
                                <input name="u_nickname" type="text" maxlength="12" required>
                                <label>站內暱稱(12字內的英文與數字組合)</label>
                            </div>
                            <div class="form-group focused">
                                <span>出生日期</span>
                                <input name="u_birth" type="date" id="remove_blur" required>
                            </div>
                            <div class="form-group">
                                <input name="u_phone" type="tel" maxlength="10" required>
                                <label>手機號碼</label>
                            </div>
                            <div class="form-group">
                                <input name="u_mail" type="email" maxlength="50" required>
                                <label>電子信箱</label>
                            </div>
                            <div class="form-group">
                                <input name="u_password" type="password" required>
                                <label>密碼(必須包含英文字母和數字且長度6~12字)</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="form-group">
                                <input name="u_conpassword" type="password" required>
                                <label>確認密碼</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="rbt-modern-select bg-transparent height-45">
                                <select name="u_gender" required>
                                    <option value="" disabled selected>性別</option>
                                    <option value="0">男</option>
                                    <option value="1">女</option>
                                    <option value="2">其他</option>
                                </select>
                            </div>
                            <br>

                            <div class="form-submit-group">
                                <!-- 將下一步按鈕的type設置為button，防止表單的自動提交 -->

                                <button type="button" id="nextStepButton"
                                    class="rbt-btn btn-md btn-gradient hover-icon-reverse w-100 submmit-verify">

                                    <span class="icon-reverse-wrapper">
                                        <span class="btn-text">下一步 寄送驗證信</span>
                                        <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                                        <span class="btn-icon"><i class="feather-arrow-right"></i></span>
                                    </span>
                                </button>
                            </div>
                        </form>







                    </div>
                </div>

            </div>
        </div>
    </div>





    <!-- Start Footer aera -->
    <div class="copyright-area copyright-style-1 ptb--20 bg-color-darker g2_footer">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-12">
                    <p class="rbt-link-hover text-center color-white-off">Fit AnyWhere© </p>
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer aera -->

    <!-- Start Copyright Area  -->

    <!-- End Copyright Area  -->
    <div class="rbt-progress-parent">
        <svg class="rbt-back-circle svg-inner" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
    </div>

    <!-- JS
============================================ -->
    <!-- Modernizer JS -->
    <script src="../assets//js/vendor/modernizr.min.js"></script>
    <!-- jQuery JS -->
    <script src="../assets//js/vendor/jquery.js"></script>
    <!-- Bootstrap JS -->
    <script src="../assets//js/vendor/bootstrap.min.js"></script>
    <!-- sal.js -->
    <script src="../assets//js/vendor/sal.js"></script>
    <script src="../assets//js/vendor/swiper.js"></script>
    <script src="../assets//js/vendor/magnify.min.js"></script>
    <script src="../assets//js/vendor/jquery-appear.js"></script>
    <script src="../assets//js/vendor/odometer.js"></script>
    <script src="../assets//js/vendor/backtotop.js"></script>
    <script src="../assets//js/vendor/isotop.js"></script>
    <script src="../assets//js/vendor/imageloaded.js"></script>

    <script src="../assets//js/vendor/wow.js"></script>
    <script src="../assets//js/vendor/waypoint.min.js"></script>
    <script src="../assets//js/vendor/easypie.js"></script>
    <script src="../assets//js/vendor/text-type.js"></script>
    <script src="../assets//js/vendor/jquery-one-page-nav.js"></script>
    <script src="../assets//js/vendor/bootstrap-select.min.js"></script>
    <script src="../assets//js/vendor/jquery-ui.js"></script>
    <script src="../assets//js/vendor/magnify-popup.min.js"></script>
    <script src="../assets//js/vendor/paralax-scroll.js"></script>
    <script src="../assets//js/vendor/paralax.min.js"></script>
    <script src="../assets//js/vendor/countdown.js"></script>
    <script src="../assets//js/vendor/plyr.js"></script>
    <!-- Main JS -->
    <script src="../assets//js/main.js"></script>

    <script src="../assets//js/mok/mok_opinion.js"></script>
    <script src="../assets//js/register_verify.js"></script>

    <!-- Eugen -->
    <script>

        // 通知後端生成驗證碼

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("sendVerificationCode").addEventListener("click", function () {
                var email = extractUMail();
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "/THA105G2/user_controller", true);
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                xhr.onreadystatechange = function () {
                    if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                        alert("驗證碼已寄送");
                    }
                };
                xhr.send("requestType=processVerificationEmail&uMail=" + encodeURIComponent(email));
            });
        });



        // 通知後端核對生成的驗證碼和會員輸入的驗證碼


        document.getElementById('checkVerificationCode').addEventListener('click', function () {
            // 使用先前的驗證碼變數
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/THA105G2/user_controller', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = JSON.parse(xhr.responseText);
                    if (response.result === 1) {
                        // alert("認證碼正確"); 
                        sendRegistrationForm();

                    } else if (response.result === 0) {
                        alert("認證碼錯誤，請重新輸入！");

                        // 清空輸入框
                        for (var i = 1; i <= 6; i++) {
                            document.getElementById('verificationCode' + i).value = '';
                        }
                    }
                }
            };
            xhr.send('requestType=processVerificationCheck&verificationCode=' + verificationCode);
        });

        function sendRegistrationForm() {
            
        }
    </script>







    <script>
        var verificationCode = ''; // 儲存驗證碼的變數

        document.addEventListener("DOMContentLoaded", function () {
            var inputs = document.querySelectorAll('.article-inner-wrapper-number-input input[type="text"]');

            // 為每個輸入框綁定事件
            inputs.forEach(function (input, idx) {
                input.addEventListener('keyup', function (e) {
                    // 檢查是否為數字輸入並且不是刪除鍵或退格鍵的動作
                    if ((e.key >= 0 && e.key <= 9) && this.value.length === 1) {
                        // 移動焦點到下一個輸入框
                        var nextInput = inputs[idx + 1];
                        if (nextInput) {
                            nextInput.focus();
                        }
                    }

                    // 將驗證碼組合起來並存入 verificationCode 變數中
                    verificationCode = '';
                    inputs.forEach(function (input) {
                        verificationCode += input.value;
                    });
                });

                // 限制只能輸入數字
                input.addEventListener('input', function () {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });

                // 防止超過一個字符
                input.addEventListener('input', function () {
                    if (this.value.length > 1) {
                        this.value = this.value.slice(0, 1);
                    }
                });
            });
        });
    </script>


    <script>
        // 將彈窗隱藏
        document.getElementById('lightbox-verify').style.display = 'none';

        // 點擊後暫存註冊資料表並顯示彈窗
        document.getElementById('nextStepButton').addEventListener('click', function () {
            var form = document.querySelector("form[action='/THA105G2/user_controller']");
            var allFieldsFilled = Array.from(form.elements).every(element => {
                return element.type !== 'button' && element.value !== '';
            });



            // 顯示彈窗
            document.getElementById('lightbox-verify').style.display = 'block';

            // 將表單資料暫存
            var formData = {};
            Array.from(form.elements).forEach(element => {
                if (element.name && element.value) {
                    formData[element.name] = element.value;
                }
            });

            // 儲存 formData 以供後續使用
            document.getElementById('nextStepButton').setAttribute('data-formData', JSON.stringify(formData));
        });

        // uMail抽取法
        function extractUMail() {
            var formDataString = document.getElementById('nextStepButton').getAttribute('data-formData');
            if (formDataString) {
                var formData = JSON.parse(formDataString);
                return formData.u_mail;
            } else {
                return null; // 或其他錯誤處理
            }
        }


    </script>












</body>

</html>